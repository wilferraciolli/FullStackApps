<div class="upload-container">
  <h2>Upload Image</h2>

  <form (ngSubmit)="onSubmit()" #uploadForm="ngForm">
    <div class="form-group">
      <label for="file">Select Image:</label>
      <input
        type="file"
        id="file"
        accept="image/*"
        (change)="onFileSelected($event)"
        required>
    </div>

    <div class="form-group">
      <label for="altText">Alt Text (for accessibility):</label>
      <input
        type="text"
        id="altText"
        [(ngModel)]="metadata.altText"
        name="altText"
        placeholder="Describe the image..."
        required>
    </div>

    <div class="form-group">
      <label for="description">Description:</label>
      <textarea
        id="description"
        [(ngModel)]="metadata.description"
        name="description"
        placeholder="Additional description..."
        rows="3">
      </textarea>
    </div>

    <div class="form-group">
      <label for="tags">Tags:</label>
      <input
        type="text"
        id="tags"
        [(ngModel)]="metadata.tags"
        name="tags"
        placeholder="tag1, tag2, tag3...">
    </div>

    <div class="form-group">
      <label for="customName">Custom Name (optional):</label>
      <input
        type="text"
        id="customName"
        [(ngModel)]="customName"
        name="customName"
        placeholder="Leave empty to use original filename">
    </div>

    <button
      type="submit"
      [disabled]="!selectedFile || !metadata.altText || uploading"
      class="upload-btn">
      {{ uploading ? 'Uploading...' : 'Upload Image' }}
    </button>
  </form>

  <div *ngIf="uploadResult" class="upload-result">
    <h3>Upload Successful!</h3>
    @if (uploadResult){
      <p><strong>Name:</strong> {{ uploadResult.name }}</p>
      <p><strong>Size:</strong> {{ formatBytes(uploadResult.size) }}</p>
      <p><strong>Type:</strong> {{ uploadResult.contentType }}</p>
      <p><strong>Alt Text:</strong> {{ uploadResult.metadata?.['altText'] }}</p>
    }

  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>
</div>
